<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CodeDater Survey</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
        crossorigin="anonymous">
    <link rel="shortcut icon" href="./images/favicon/favicon.ico" />

</head>

<body>
    <div class="container">
        <div class="row bg-secondary p-2 mb-2" >
            <h1>Survey Questions</h1>
            <h3 class="text-white">Answer each honestly to find the one who won't throw you for a for-loop...</h3>
            <hr>
        </div>
        <div class="row">
            <h5>Name</h5>
            <input type="text" id="name" class="form-control" required>
            <h5>Link to photo</h5>
            <input type="text" id="photo" class="form-control" required>
            <hr>
        </div>
        <div class="form-group">
            <h3><strong>Statement One</strong></h3>
            <h4>You enjoy having a wide circle of acquaintances.</h4>
            <select id="q1">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Two</strong></h3>
            <h4>You often ponder the root cause of phenomena and things.</h4>
            <select id="q2">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Three</strong></h3>
            <h4>Your actions are frequently influenced by your emotions.</h4>
            <select id="q3">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Four</strong></h3>
            <h4>You are a person somewhat reserved and distant in communication.</h4>
            <select id="q4">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Five</strong></h3>
            <h4>You get bored if you have to read theoretical books.</h4>
            <select id="q5">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Six</strong></h3>
            <h4>You rapidly get involved in the social life of a new workplace.</h4>
            <select id="q6">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Seven</strong></h3>
            <h4>You prefer to isolate yourself from outside noises.</h4>
            <select id="q7">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Eight</strong></h3>
            <h4>You like surprises.</h4>
            <select id="q8">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Nine</strong></h3>
            <h4>You usually place yourself nearer to the side than in the center of the room.</h4>
            <select id="q9">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Statement Ten</strong></h3>
            <h4>You prefer working on front-end development more than back-end development.</h4>
            <select id="q10">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (That's never me!)</option>
                <option value="2">2 (That's rarely me)</option>
                <option value="3">3 (That's me sometimes)</option>
                <option value="4">4 (That's usually me)</option>
                <option value="5">5 (That's me all the time!)</option>
            </select>
        </div>
        <div>
            <button type="submit" class="btn btn-info btn-lg" id="submitSurvey"><span class="fas fa-laptop"></span> Who's my match?</button>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="specificModal" tabindex="-1" role="dialog" aria-labelledby="specificModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h3 class="modal-title far fa-heart" id="specificModalLabel"> Your Dream Match Is!</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h4 class='text-center' id="matchName"></h4>
                    <img class='img-fluid' id="matchPic">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">To Happily Ever After</button>
                </div>
                </div>
            </div>
        </div>  

        <footer>
            <nav class="nav">
                <a class="nav-link" href="/api/friends">API Dating Profiles</a>
            </nav>
        </footer>

    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js" integrity="sha384-7aThvCh9TypR7fIc2HV4O/nFMVCBwyIUKL8XCtKE+8xgCgl/PQGuFsvShjr74PBp" crossorigin="anonymous"></script>
    <!-- <script src="click.js"></script> -->
    <script type="text/javascript">
        $('#submitSurvey').on(`click`, function(event) {
            event.preventDefault();

            let userResponse = {
                name: $(`#name`).val().trim(),
                photo: $(`#photo`).val().trim(),
                scores: [
                    parseInt($(`#q1`).val()),
                    parseInt($(`#q2`).val()),
                    parseInt($(`#q3`).val()),
                    parseInt($(`#q4`).val()),
                    parseInt($(`#q5`).val()),
                    parseInt($(`#q6`).val()),
                    parseInt($(`#q7`).val()),
                    parseInt($(`#q8`).val()),
                    parseInt($(`#q9`).val()),
                    parseInt($(`#q10`).val())
                ]
            }
            let scoreArr = userResponse.scores;
            if(scoreArr.includes(NaN)){
                alert(`Oops, like you didn't answer all the dropdowns - please check them all and then submit!`);
                return;
            }
            console.log(JSON.stringify(userResponse));

            $.post('/api/friends', userResponse)
            .then(function(data) {
            $(`#matchName`).text(data.matchName);
            $(`#matchPic`).attr('src', data.matchPic);

            $(`#specificModal`).modal(`toggle`);
            });


        });
</script>
</body>

</html>